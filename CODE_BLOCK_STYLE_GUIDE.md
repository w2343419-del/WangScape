# WangScape 文章编写标准指南

本指南规定了所有文章的格式标准，确保项目内容的一致性和可维护性。

---

## 目录
1. [YAML Frontmatter 规范](#yaml-frontmatter-规范)
2. [标题与结构](#标题与结构)
3. [代码块规范](#代码块规范)
4. [文本与段落](#文本与段落)
5. [数学公式](#数学公式)
6. [列表与表格](#列表与表格)
7. [链接与引用](#链接与引用)
8. [中英文混排](#中英文混排)

---

## YAML Frontmatter 规范

### 必填字段
```yaml
---
title: "文章标题"
date: 2026-02-28T11:31:00+08:00
description: "简短描述"
tags:
    - 标签1
    - 标签2
categories:
    - 分类1
---
```

### 可选字段
- `draft: false` - 草稿状态（不发布）
- `pinned: false` - 是否置顶
- `image: ""` - 封面图片路径
- `math: false` - 是否需要数学公式渲染
- `license: ""` - 协议证书
- `comments: true` - 是否允许评论
- `hidden: false` - 是否隐藏文章

### 注意事项
- ✅ 日期格式必须是 ISO 8601：`2026-02-28T11:31:00+08:00`
- ✅ 标签和分类用列表格式（缩进 4 个空格）
- ❌ 避免在 `description` 中使用冒号，容易破坏 YAML 解析
- ✅ 字符串用双引号包裹，避免特殊字符问题

---

## 标题与结构

### 标题层级规范
```markdown
# 一级标题（文章主题，仅一个）

## 二级标题（主要段落）

### 三级标题（子段落）

#### 四级标题（细节说明 - 谨慎使用）
```

### 规则
- 一篇文章只能有**一个一级标题**（对应 YAML 中的 `title`）
- 二级标题用于主要内容分段
- 三级标题用于包含代码或详细说明的小节
- 避免使用四级或更深的标题（如必需，考虑拆分为新文章）
- 标题前後各留一行空白

示例（正确）：
```markdown
# P1004 方格取数解法分析

## 问题描述

文章内容...

## 解法分析

### 解法一：动态规划

代码...

### 解法二：DFS 记忆化

代码...
```

---

## 代码块规范

### 核心原则
- ✅ **保留**：解释性注释和算法说明
  - 变量含义：`int dp[20][10][10]; // dp[步数][人1的行][人2的行]`
  - 初始化说明：`// 初始化为-1表示不可达`
  - 算法步骤：`// 动态规划主循环`
  - 关键操作：`// 规范化：保证 a <= b`

- ❌ **删除**：美化性分隔符和冗余分隔
  - 不使用：`// ========== xxx ==========`
  - 不使用：`// ----------- xxx -----------`

### 语言标记
使用正确的语言标记以获得语法高亮：

```markdown
```c
// C/C++ 代码
```

```python
# Python 代码
```

```javascript
// JavaScript 代码
```

```go
// Go 代码
```

```bash
# Bash/Shell 代码
```
```

### 缩进与空白
- 使用 **4 个空格**作为一个缩进级别
- 相关逻辑块之间可用单行空白分隔
- 不过度空白化：避免过多的空行

正确示例：
```c
for (int k = 2; k < 2 * N; k++) {
    for (int x1 = 1; x1 <= N; x1++) {
        // 逻辑1
        // ...

        // 逻辑2
        for (int m1 = 0; m1 <= 1; m1++) {
            // 内层逻辑
        }
    }
}
```

### 长度限制
- 单行不超过 80 个字符（如可能）
- 超过 80 字符时考虑换行或简化

### 图表与伪代码
对于复杂的图表或数据结构说明，使用代码块而不是纯文本：

```
容量1，费用-val   (第一条路经过，取走数字)
in(i,j) ================> out(i,j)
容量1，费用0     (第二条路经过，数字已取走)
```

---

## 文本与段落

### 段落规则
- 段落之间用**单行空白**分隔
- 段落内部不使用首行缩进
- 避免过长的段落（超过 200 字考虑分段）

### 强调与符号
- **加粗**：用于关键术语或概念
- *斜体*：用于引用或外文词汇
- `代码`：用于变量名、函数名、文件名等
- ~~删除线~~：用于已弃用的内容（少用）

### 示例
```markdown
这是一个包含**关键概念**和`代码示例`的段落。
使用 *斜体* 来强调非中文术语，如 *dynamic programming*。
```

---

## 数学公式

### 行内公式
用单个 `$` 包裹：
```markdown
这个公式 $f(x) = x^2$ 表示平方函数。
```

### 块级公式
用双重 `$$` 包裹：
```markdown
$$
f(x) = \begin{cases}
  x^2 & \text{if } x \geq 0 \\
  -x^2 & \text{if } x < 0
\end{cases}
$$
```

### 注意事项
- 保持 LaTeX 语法简洁
- 复杂公式建议拆分为多个简单公式
- 在 YAML frontmatter 中设置 `math: true` 以启用渲染

---

## 列表与表格

### 无序列表
```markdown
- 项目一
- 项目二
  - 子项目 2.1
  - 子项目 2.2
- 项目三
```

### 有序列表
```markdown
1. 第一项
2. 第二项
   1. 子项 2.1
   2. 子项 2.2
3. 第三项
```

### 表格
```markdown
| 列1 | 列2 | 列3 |
|-----|-----|-----|
| 数据 | 数据 | 数据 |
| 数据 | 数据 | 数据 |
```

### 规则
- 列表项前后各留一行空白
- 嵌套列表用 2 个空格缩进
- 避免三层以上的嵌套（超过此深度考虑重组）
- 表格行数不超过 15 行（过多表格考虑分表或转为文本）

---

## 链接与引用

### 文档内链接
```markdown
参见[标题与结构](#标题与结构)部分。
```

### 外部链接
```markdown
[链接文本](https://example.com)
```

### 脚注（如需要）
```markdown
这是文本[^1]。

[^1]: 这是脚注内容。
```

### 规则
- 链接文本应简洁且能自我解释
- ❌ 避免：`点击[这里](url)`
- ✅ 推荐：`参见[API 文档](url)`

---

## 中英文混排

### 间距规则
- **中文与英文间**：空一个空格
- **中文与数字间**：空一个空格
- **标点符号**：紧贴前文

正确示例：
```
这是一个 Python 编程语言的例子，版本号是 3.9。
使用 API v2.0 时，性能提升了 30%。
```

不推荐示例：
```
这是一个Python编程语言的例子，版本号是3.9。
使用API v2.0时，性能提升了30%。
```

### 标点符号
- 中文段落使用**中文标点**：。，；：
- 代码、英文中使用**英文标点**：. , ; :
- 混合段落优先使用中文标点

正确示例：
```
这是一个使用 Python 的例子，它展示了如何调用 API。
```

---

## 文章组织最佳实践

### 推荐结构
```
# 标题（对应 title）

简短介绍段落（2-3 句）。

## 背景/问题描述

详细的背景和问题陈述。

## 解法/分析

### 解法一

代码块...

### 解法二

代码块...

## 性能对比/总结

对比总结。

## 相关资源

链接列表。
```

### 长文章处理
- 如果文章超过 3000 字，考虑：
  - 拆分为多篇文章
  - 或使用清晰的目录导航
  - 或在文章开头添加目录（使用 Markdown 标题锚点）

---

## 使用清单

写文章时的完整检查清单：

### YAML & Frontmatter
- [ ] 所需字段都已填写
- [ ] 日期格式正确（ISO 8601）
- [ ] 标签和分类已添加
- [ ] 无特殊字符破坏 YAML 解析

### 标题与结构
- [ ] 只有一个一级标题
- [ ] 标题层级逻辑清晰
- [ ] 标题前后有空行

### 代码块
- [ ] 使用正确的语言标记
- [ ] 移除所有分隔符注释
- [ ] 保留解释性注释
- [ ] 缩进统一为 4 个空格
- [ ] 没有超过 80 字符的单行（如可能）

### 文本
- [ ] 段落清晰，无过长行
- [ ] 中英文间距正确
- [ ] 链接文本有意义
- [ ] 无拼写错误

### 整体
- [ ] 文章组织合理
- [ ] 代码块数量适中（3-10 个）
- [ ] 包含必要的解释和背景
- [ ] Hugo 构建无错误

---

## 维护和更新

当发现新的格式问题或改进建议时：
1. 更新本指南
2. 提交 `docs:` 前缀的 commit
3. 如涉及已有文章，同步修改文章内容

示例 commit 信息：
```
docs: 添加图表格式规范
docs: 更新中英文混排规则
style: 优化文章 A 的代码块格式
```

---

## FAQ

**Q: 代码块超过 80 字符怎么办？**
A: 优先考虑逻辑重组，次选换行分隔。极端情况可超过，但要保持可读性。

**Q: 能否使用三层或更深的嵌套列表？**
A: 不推荐。如必需，改为多个二级列表或重新组织内容结构。

**Q: 图片应该放在哪里？**
A: 使用相对路径放在文章同目录的 `images/` 文件夹中，或使用绝对路径到 `/assets/img/`。

**Q: 可以删除注释以缩减代码长度吗？**
A: 不可以。删除美化注释可以，但保留所有解释性注释。

**Q: 如何处理超长代码？**
A: 可以分为多个代码块，或添加省略号说明省略部分。

---

*最后更新: 2026-02-28*
